<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Horaria - Droguerías Davivir</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>
    <style>
        /* Estilos adicionales para el calendario */
        #calendar {
            max-width: 900px;
            margin: 40px auto;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="logo_davivir.PNG" alt="Droguerías Davivir">
        </div>
        <h1>Malla Horaria - Droguerías Davivir</h1>
    </header>

    <main>
        <section id="configuracion">
            <h2>Configuración</h2>
            <form id="configForm">
                <label for="numEmpleados">Número de empleados:</label>
                <input type="number" id="numEmpleados" value="8" required>
                
                <h3>Turnos</h3>
                <label for="turnoDiaInicio">Turno Día - Hora de Inicio:</label>
                <input type="time" id="turnoDiaInicio" value="07:00" required>
        
                <label for="turnoDiaFin">Turno Día - Hora de Fin:</label>
                <input type="time" id="turnoDiaFin" value="15:00" required>
        
                <label for="turnoTardeInicio">Turno Tarde - Hora de Inicio:</label>
                <input type="time" id="turnoTardeInicio" value="13:00" required>
        
                <label for="turnoTardeFin">Turno Tarde - Hora de Fin:</label>
                <input type="time" id="turnoTardeFin" value="21:30" required>
        
                <label for="turnoPartidoInicio1">Turno Partido - Hora de Inicio 1:</label>
                <input type="time" id="turnoPartidoInicio1" value="07:00" required>
        
                <label for="turnoPartidoFin1">Turno Partido - Hora de Fin 1:</label>
                <input type="time" id="turnoPartidoFin1" value="12:00" required>
        
                <label for="turnoPartidoInicio2">Turno Partido - Hora de Inicio 2:</label>
                <input type="time" id="turnoPartidoInicio2" value="17:00" required>
        
                <label for="turnoPartidoFin2">Turno Partido - Hora de Fin 2:</label>
                <input type="time" id="turnoPartidoFin2" value="21:30" required>

                <button type="submit">Generar Horario</button>
            </form>
        </section>
        
        <section id="mallaHoraria">
            <h2>Malla Horaria</h2>
            <div id="calendar"></div>
        </section>
        
        <section id="descansos">
            <h2>Descansos</h2>
            <p>Los días de descanso se mostrarán en el calendario.</p>
            <table>
                <thead>
                    <tr>
                        <th>Empleado</th>
                        <th>Días de Descanso</th>
                    </tr>
                </thead>
                <tbody id="descansosBody">
                    <!-- Aquí se llenará la tabla con los días de descanso -->
                </tbody>
            </table>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Droguerías Davivir. Todos los derechos reservados.</p>
    </footer>

    <script src="function.js"></script>
    <script>
        // Inicializar el calendario
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            const calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                                    left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            events: [], // Aquí se agregarán los eventos generados
            eventClick: function(info) {
                alert('Evento: ' + info.event.title);
            }
            });

            // Manejar el envío del formulario
            document.getElementById('configForm').addEventListener('submit', function(e) {
                e.preventDefault(); // Prevenir el envío del formulario

                // Obtener los valores del formulario
                const numEmpleados = document.getElementById('numEmpleados').value;
                const turnoDiaInicio = document.getElementById('turnoDiaInicio').value;
                const turnoDiaFin = document.getElementById('turnoDiaFin').value;
                const turnoTardeInicio = document.getElementById('turnoTardeInicio').value;
                const turnoTardeFin = document.getElementById('turnoTardeFin').value;
                const turnoPartidoInicio1 = document.getElementById('turnoPartidoInicio1').value;
                const turnoPartidoFin1 = document.getElementById('turnoPartidoFin1').value;
                const turnoPartidoInicio2 = document.getElementById('turnoPartidoInicio2').value;
                const turnoPartidoFin2 = document.getElementById('turnoPartidoFin2').value;

                // Generar horarios y agregar eventos al calendario
                generateSchedule(numEmpleados, {
                    turnoDia: { inicio: turnoDiaInicio, fin: turnoDiaFin },
                    turnoTarde: { inicio: turnoTardeInicio, fin: turnoTardeFin },
                    turnoPartido: [
                        { inicio: turnoPartidoInicio1, fin: turnoPartidoFin1 },
                        { inicio: turnoPartidoInicio2, fin: turnoPartidoFin2 }
                    ]
                });

                // Renderizar el calendario
                calendar.render();
            });

            // Función para generar horarios
            function generateSchedule(numEmpleados, turnos) {
                // Limpiar eventos anteriores
                calendar.removeAllEvents();

                // Aquí puedes implementar tu lógica para generar horarios
                // Este es un ejemplo básico para agregar eventos al calendario
                for (let i = 0; i < numEmpleados; i++) {
                    const empleadoNombre = `Empleado ${i + 1}`;
                    const fechaInicio = new Date(2024, 10, 1 + i); // Noviembre, días 1 a 30
                    const fechaFin = new Date(2024, 10, 1 + i);

                    // Turno de Día
                    calendar.addEvent({
                        title: `${empleadoNombre} - Turno Día`,
                        start: fechaInicio.toISOString().split('T')[0] + 'T' + turnos.turnoDia.inicio,
                        end: fechaInicio.toISOString().split('T')[0] + 'T' + turnos.turnoDia.fin,
                        color: 'blue'
                    });

                    // Turno de Tarde
                    calendar.addEvent({
                        title: `${empleadoNombre} - Turno Tarde`,
                        start: fechaInicio.toISOString().split('T')[0] + 'T' + turnos.turnoTarde.inicio,
                        end: fechaInicio.toISOString().split('T')[0] + 'T' + turnos.turnoTarde.fin,
                        color: 'orange'
                    });

                    // Turno Partido
                    for (const turno of turnos.turnoPartido) {
                        calendar.addEvent({
                            title: `${empleadoNombre} - Turno Partido`,
                            start: fechaInicio.toISOString().split('T')[0] + 'T' + turno.inicio,
                            end: fechaInicio.toISOString().split('T')[0] + 'T' + turno.fin,
                            color: 'green'
                        });
                    }
                }
            }

            // Renderizar el calendario
            calendar.render();
        });
    </script>
</body>
</html>
